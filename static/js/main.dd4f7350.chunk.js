(this["webpackJsonpsci-info-system"]=this["webpackJsonpsci-info-system"]||[]).push([[0],{150:function(t,e,a){t.exports=a(328)},155:function(t,e,a){},171:function(t,e,a){},328:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),i=a(3),s=a.n(i),c=(a(155),a(327),a(145)),l=(a(73),a(23)),d=(a(165),a(71)),o=a(45),u=(a(167),a(146)),_=a(137),p=a(138),h=a(147),m=a(139),g=a(148),f=(a(169),a(54)),y=(a(171),{layout:{position:"absolute",height:"100%",width:"100%"},header:{background:"#fff",marginBottom:"2px solid rgba(0, 200, 130, 0.9)"},input_title:{margin:"0, 30px",width:"250px",marginRight:"25px"},input_year:{margin:"0, 30px",width:"100px",marginRight:"25px"},input_author:{margin:"0, 30px",width:"220px",marginRight:"25px"},table:{height:"600px",overflow:"scroll"},footer:{height:"35px",padding:"10px 0",textAlign:"center",lineHeight:"15px",fontSize:"15px",backgroundColor:"black",color:"gray",borderTop:"1px solid #3b3f41"},button:{fontSize:"12px",textAlign:"center",margin:"0 20px"}}),x=window.electron,b=f.a.Header,v=f.a.Content,w=f.a.Footer,E=function(t){function e(){var t,a;Object(_.a)(this,e);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(h.a)(this,(t=Object(m.a)(e)).call.apply(t,[this].concat(i)))).state={data:[],current_id:0,title_arr:[],has_listen_message:!1,has_send_title:!1,columns:[{title:"\u7f16\u53f7",dataIndex:"id",key:"id",render:function(t){return r.a.createElement("span",null,t)}},{title:"\u6807\u9898",dataIndex:"title",key:"title",render:function(t){return r.a.createElement("span",{title:t},t.slice(0,30)+"...")}},{title:"\u622a\u56fe",dataIndex:"search_result",key:"search_result"},{title:"\u5f15\u7528\u91cf",dataIndex:"cite_num",key:"cite_num"},{title:"\u81ea\u5f15",dataIndex:"self_cite_num",key:"self_cite_num"},{title:"\u4ed6\u5f15",dataIndex:"other_cite_num",key:"other_cite_num"},{title:"\u6253\u5370\u5f15\u7528\u6587\u732e\u5217\u8868",dataIndex:"cite_page_printed",key:"cite_page_printed"},{title:"\u6253\u5370\u8be6\u60c5\u9875",dataIndex:"detail_page_printed",key:"detail_page_printed"},{title:"\u8fdb\u5ea6",dataIndex:"progress_status",key:"progress_status",render:function(t){return r.a.createElement(u.a,{type:"circle",percent:t[0],width:30,status:t[1]})}}]},a.send_title=function(){if(a.state.has_send_title)alert("\u8bf7\u91cd\u65b0\u542f\u52a8\u6216\u8005\u7b49\u5f85\u4efb\u52a1\u5b8c\u6210");else{a.setState({data:[],current_id:0}),a.message_handle();var t=document.getElementById("title").value.replace(/\uff0c/g,",").split(",").map((function(t){return t.replace(/(^\s*)/,"")})),e=document.getElementById("author").value,n=document.getElementById("year").value.replace(/\uff0c/g,",").replace(/\s/g,"").split(",");""!==t[0]&&""!==e&&""!==n[0]?(a.setState({title_arr:t},(function(){a.change_data()})),x.ipcRenderer.send("search_title_2_main",{title:t[0],id:1}),x.ipcRenderer.send("selection",{author:e,year:n}),a.state.has_send_title=!0):alert("\u8bf7\u8f93\u5165\u6807\u9898\uff0c \u5e74\u4efd\uff0c \u4f5c\u8005")}},a.show_subWindow=function(){x.ipcRenderer.send("show_subWindow",!0)},a.restart=function(){x.ipcRenderer.send("restart",!0)},a.change_data=function(){var t=Object(o.a)(a.state.data);a.state.title_arr.map((function(e,a){t.push({key:a+1,id:a+1,title:e,search_result:"",cite_num:"",cite_page_printed:"",detail_page_printed:"",progress_status:[0,"normal"]})})),a.setState({data:t})},a.update_and_load=function(t,e){a.setState({data:t},(function(){var t=a.state.title_arr,n=a.state.data[a.state.data.length-1].progress_status;"normal"!==n[1]||100===n[0]?setTimeout((function(){a.state.has_send_title=!1,a.valid_title()}),600):e.match(/\d/)||a.setState({current_id:a.state.current_id+1},(function(){x.ipcRenderer.send("search_title_2_main",{title:t[a.state.current_id],id:a.state.current_id+1})}))}))},a.message_handle=function(){a.state.has_listen_message||(a.state.has_listen_message=!0,x.ipcRenderer.on("search_page_status",(function(t,e){var n=Object(o.a)(a.state.data);"mutil"===e?(n[a.state.current_id].search_result="\u6807\u9898\u4e0d\u7cbe\u786e",n[a.state.current_id].progress_status=[25,"exception"]):"no_cite"===e?(n[a.state.current_id].search_result="\u5f15\u7528\u91cf\u4e3a0",n[a.state.current_id].cite_num=0,n[a.state.current_id].progress_status=[100,"success "]):"no_found"===e?(n[a.state.current_id].search_result="\u6ca1\u6709\u627e\u5230",n[a.state.current_id].progress_status=[25,"exception"]):(n[a.state.current_id].search_result="\u5df2\u622a\u56fe",n[a.state.current_id].progress_status=[25,"normal"]),a.update_and_load(n,e)})),x.ipcRenderer.on("cite_page_status",(function(t,e){var n=Object(o.a)(a.state.data);"no_cite"===e?(n[a.state.current_id].cite_num="0",n[a.state.current_id].progress_status=[100,"success "]):(n[a.state.current_id].cite_num=e,n[a.state.current_id].progress_status=[50,"normal"]),a.update_and_load(n,e)})),x.ipcRenderer.on("cite_num",(function(t,e){var n=Object(o.a)(a.state.data);n[a.state.current_id].self_cite_num=e.self_cite_num,n[a.state.current_id].other_cite_num=e.other_cite_num,console.log(e),a.update_and_load(n,"1")})),x.ipcRenderer.on("print",(function(t,e){var n=Object(o.a)(a.state.data);"cite_page_printed"===e?(n[a.state.current_id].cite_page_printed="\u5df2\u6253\u5370",n[a.state.current_id].progress_status=[75,"normal"],a.update_and_load(n,"1")):"detail_page_printed"===e?(n[a.state.current_id].detail_page_printed="\u5df2\u6253\u5370",n[a.state.current_id].progress_status=[100,"success "],a.update_and_load(n,"")):alert("\u7edf\u8ba1\u5b8c\u6210")})))},a}return Object(g.a)(e,t),Object(p.a)(e,[{key:"valid_title",value:function(){var t=[],e=!0,a=!1,n=void 0;try{for(var r,i=this.state.data[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var s=r.value;"0"===s.cite_num&&""===s.cite_num||t.push(s.id+"_search_"+s.title+".png")}}catch(c){a=!0,n=c}finally{try{e||null==i.return||i.return()}finally{if(a)throw n}}t.length&&x.ipcRenderer.send("valid_title",t)}},{key:"render",value:function(){return r.a.createElement(f.a,{style:y.layout},r.a.createElement(b,{style:y.header},r.a.createElement(d.a,{placeholder:"\u8f93\u5165\u6587\u7ae0\u6807\u9898\uff0c\u591a\u7bc7\u4ee5\u9017\u53f7\u9694\u5f00",style:y.input_title,id:"title"}),r.a.createElement(d.a,{placeholder:"\u7b5b\u9009\u5e74\u4efd",style:y.input_year,id:"year"}),r.a.createElement(d.a,{placeholder:"\u4f5c\u8005\u59d3\u540d\uff1a\u5982 Chen-Jing-Run",style:y.input_author,id:"author"}),r.a.createElement(l.a,{type:"primary",style:y.button,onClick:this.send_title},"\u5f00\u59cb\u7edf\u8ba1"),r.a.createElement(l.a,{type:"primary",style:y.button,onClick:this.show_subWindow},"\u663e\u793a\u540e\u53f0"),r.a.createElement(l.a,{type:"primary",style:y.button,onClick:this.restart},"\u91cd\u65b0\u542f\u52a8")),r.a.createElement(v,null,r.a.createElement(c.a,{columns:this.state.columns,dataSource:this.state.data,style:y.table,pagination:!1})),r.a.createElement(w,{style:y.footer},"\xa92020 Created by JMx. ",r.a.createElement("a",{href:'javascript: electron.shell.openExternal("https://github.com/jiandandaoxingfu/sci-info-collect/blob/master/README.md")'},"\u5e2e\u52a9"),r.a.createElement("br",null)))}}]),e}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[150,1,2]]]);
//# sourceMappingURL=main.dd4f7350.chunk.js.map